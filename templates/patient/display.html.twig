{% extends 'base.html.twig' %}

{% block content %}



<section class="mt-5">
    <div class="container">
      <div style="min-height: 150px;position:relative; " class="p-3 mb-4 pl-5 w-100 bg-dark text-white">
        <div class="text-white text-center" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
          <h1> {{  patient.nom  }} {{  patient.prenom  }}  </h1>
        </div>
      </div>

      <div class="row">
        <div class="col-6">
          <div class="p-3 text-center w-100 bg-dark text-white">
            <h3> Profile  </h3>
          </div>
          <div class="p-3 w-100 bg-white">
            <table  class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>Variable</th>
                    <th>Valeur</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td> <label class="control-label">ID</label> </td>
                    <td> {{ "PT19" ~  patient.id  }} </td>
                  </tr>
                  <tr>
                    <td> <label class="control-label">Nom</label> </td>
                    <td> {{  patient.nom  }} </td>
                  </tr>
                  <tr>
                    <td> <label class="control-label">Prenom</label> </td>
                    <td> {{  patient.prenom  }} </td>
                  </tr>
                  <tr>
                    <td> <label class="control-label">Email</label> </td>
                    <td> {{  patient.email  }} </td>
                  </tr>
                  <tr>
                    <td> <label class="control-label">Addresse</label> </td>
                    <td> {{  patient.adress  }} </td>
                  </tr>
                  <tr>
                    <td> <label class="control-label">Numero Tél</label> </td>
                    <td> {{  patient.Numerotel  }} </td>
                  </tr>
                  <tr>
                    <td> <label class="control-label">Date enregistrement</label> </td>
                    <td> {{  patient.addDate  }} </td>
                  </tr>
                  <tr>
                    <td> <label class="control-label">Ajouter par</label> </td>
                    <td> <a href="#">{{  patient.addBy  }}</a> </td>
                  </tr>
                </tbody>
              </table>
              <a href="#" class="btn btn-sm btn-block btn-danger bg-danger mb-4">Suprimer</a>
          </div>

          <div class="p-3 mt-5 text-center w-100 bg-dark text-white">
            <h3> Information sur le profile physique dy pation  </h3>
          </div>
          <div class="p-3 w-100 bg-white">
            <table  class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>Question</th>
                    <th>Reponse</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  {% for item in patient.infoAnswers %}
                  <tr>
                    <td>
                      {{item.Question.question[:15]}}
                    </td>
                    <td>
                      {{item.answer[:15]}}
                    </td>
                    <td class="text-right">
                      <form class="" action="/info/delete" method="post">
                        <input type="text" hidden value={{item.id}} name="ans_id" value="">
                        <Button type="submit" class="btn btn-danger btn-sm"> <small>✖</small> </Button>
                      </form>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
              <form class="mb-4" action="/add/info/patient" method="post">
                <input type="text" hidden name="pat_id" value={{patient.id}} >
                <button href="#" type="submit" class="btn btn-block btn-dark bg-dark"> <small>Ajouter information</small> </button> </td>
              </form>
          </div>




        </div>
        <div class="col-6">
            <div class="p-3  text-center w-100 bg-dark text-white">
              <h3> Questionaires remplis </h3>
            </div>
            <div class="p-3 w-100 bg-white">
              <table  class="table table-striped table-hover">
                  <tbody>
                    {% for survey in surv_done %}
                      <tr>
                        <td class="text-left">
                          <a href="#">{{survey.title}}</a>
                         </td>
                        <td class="text-right pl-4">
                          ✓
                        </td>
                        <td class="text-right pl-4">
                          <form class="" action="/answers/delete" method="post">
                            <input type="text" hidden name="SRV" value={{survey.id}}>
                            <input type="text" hidden name="PAT" value= {{patient.id}}>
                            <Button type="submit" class="btn btn-danger btn-sm"> <small>✖</small> </Button>
                          </form>
                        </td>
                      </tr>
                    {% endfor %}
                  </tbody>
              </table>
            </div>


            <div class="p-3 mt-5 text-center w-100 bg-dark text-white">
              <h3> Questionaires disponible </h3>
            </div>
            <div class="p-3 w-100 bg-white">
              <table  class="table table-striped table-hover">
                  <tbody>
                    {% for survey in surv_not_done %}
                      <tr>
                        <td class="text-left">
                          <a href="/survey/{{survey.id}}/patient/{{patient.id}}">{{survey.title}}</a>
                         </td>
                        <td class="text-right pl-4">
                          ✖
                        </td>
                        <td class="text-right pl-4">
                          <a href="/survey/{{survey.id}}/patient/{{patient.id}}" class="btn btn-dark btn-sm text-white"> <small>Remplir</small> </a>
                        </td>
                      </tr>
                    {% endfor %}
                  </tbody>
              </table>
                <form class="mb-4" action="/add/info/patient" method="post">
                  <input type="text" hidden name="pat_id" value={{patient.id}} >
                  <button href="#" type="submit" class="btn btn-block btn-dark bg-dark"> <small>Remplir un questionaire</small> </button> </td>
                </form>
            </div>


            <div class="mt-4 mb-4 btn-dark p-3 text-white text-center">
              <a href="/survey/add" class="btn btn-block bg-dark btn-dark">
                <h3>Ajouter nouveau questionnaire</h3>
              </a>
            </div>



            <div class="mt-4 mb-4  p-3 text-white text-center">
              <a href="/export/data/{{patient.id}}" class="btn btn-block bg-primary btn-primary">
                <h3>Export data</h3>
              </a>
            </div>


        </div>

        <div class="col-12">
          <div class="p-3 mt-5 text-center w-100 bg-dark text-white">
          </div>
          <div class="p-3 w-100 bg-white">
            <table  class="table table-striped table-hover">
                <tbody>
                  <tr>
                    <td colspan="5"> <h3>Biotehrapie</h3> </td>
                  </tr>
                    {% for item in patient.getBiotehrapies() %}
                    <tr>
                      <td>
                        {{item.getBiotherapie }}
                      </td>
                      <td>
                        {{item.getDateDebut | date()}}
                      </td>
                      <td>
                        {{item.getDatearret }}
                      </td>
                      <td>
                        {{item.getMotifArret }}
                      </td>
                      <tr>
                    {% endfor %}
                  </tr>
                    <td colspan="5">
                      <a href="/patient/{{patient.id}}/add/biotherapie" class=" text-center btn btn-dark btn-block">
                        Ajouter Biotehrapie
                      </a>
                   </td>
                  </tr>
                  <tr >
                    <td colspan="5">DMARDS</td>
                  </tr>
                  {% for item in patient.getDmards() %}
                  <tr>
                    <td>
                      {{item.dmards }}
                    </td>
                    <td>
                      {{item.getDateDebut }}
                    </td>
                    <td>
                      {{item.getDatedarret }}
                    </td>
                    <td>
                      {{item.motifdarret }}
                    </td>
                    <tr>
                  {% endfor %}
                  <tr>
                    <td   colspan="5">
                      <a href="/patient/{{patient.id}}/add/dmards" class=" text-center btn btn-dark btn-block">
                        Ajouter DMARDS
                      </a>
                   </td>
                  </tr>
                  <tr>
                    <td  colspan="5">Antalgiques et AINS</td>
                  </tr>
                  {% for item in patient.getAins() %}
                    <tr>
                      <td>
                        {{item.ains }}
                      </td>
                      <td>
                        {{item.dose }}
                      </td>
                      <td>
                        {{item.freq }}
                      </td>
                      <td>
                        {{item.Datedebut }}
                        {{item.Datedarret }}
                      </td>
                    <tr>
                  {% endfor %}
                  <tr  colspan="5">
                    <td  colspan="5">
                      <a href="/patient/{{patient.id}}/add/ains" class=" text-center btn btn-dark btn-block">
                        Ajouter Antalgiques et AINS
                      </a>
                   </td>
                  </tr>
                  <tr >
                    <td colspan="5">Apparition d'effet indésirables au cours de la biothérapie</td>
                  </tr>
                  {% for item in patient.getEffets() %}
                    <tr>
                      <td>
                        {{item.Infection }}
                      </td>
                      <td>
                        {{item.Datedudc }}
                      </td>
                      <td>
                        {{item.Ttt }}
                      </td>
                      <td>
                        {{item.Datedeguerison }}
                      </td>
                    <tr>
                  {% endfor %}
                  <tr >
                    <td  colspan="5">
                      <a href="/patient/{{patient.id}}/add/effet" class=" text-center btn btn-dark btn-block">
                        Ajouter Apparition d'effet indésirables au cours de la biothérapie
                      </a>
                   </td>
                  </tr>
                </tbody>
              </table>
          </div>
        </div>
      </div>
    </div>
</section>


{% endblock %}
