{% extends 'base.html.twig' %}
{% block content %}
<section class="mt-5">
    <div class="container">
        <div style="min-height: 150px;position:relative; " class="p-3 mb-4 pl-5 w-100 bg-dark text-white">
          <div class="text-white text-center" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <h1>  Ajouter Questionaires   </h1>
          </div>
        </div>
        <div class="p-3 m-0 pl-5 w-100 bg-dark text-white">
        </div>
        <div class="p-3 m-0 pl-5 w-100 bg-white">
          <div class="p-3 card">
            <div class="text-center w-100 mb-3">
              <h2>Questionaire :</h2>
            </div>
            <div class="row mb-3">
              <div class="col-1">
              </div>
              <div class="col-3 ">
                <label for="">Titre du questionaire</label>
              </div>
              <div class="col-7">
                #{{ currentSurevey.id}} -
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-1">
              </div>
              <div class="col-3 ">
                <label for="">Titre du questionaire</label>
              </div>
              <div class="col-7">
                {{ currentSurevey.title}}
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-1">
              </div>
              <div class="col-3 ">
                <label for="">Description: </label>
              </div>
              <div class="col-7">
                {{ currentSurevey.description}}
                {{ currentSurevey.getQuestions | length}}
              </div>
            </div>
          </div>
          <div class="mt-3 mb-3  w-100 p-3">
            <div class="text-center w-100 mb-3">
              <h2>Questions :</h2>
            </div>
            <table class="table table-striped table-hover">
              <thead>
                   <td> Question </td>
                  <td> Description </td>
                  <td> Type </td>
               </thead>
              <tbody>
                {% for item in qsts %}
                  <tr>
                    <td> {{ item.question |capitalize  }}</td>
                    <td> {{ item.Description |capitalize  }}</td>
                    <td> {{ item.type |capitalize  }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          <div class="mt-3 mb-3 p-3 card">
            <form class="form-horizontal" action="/survey/save" method="post">
            <div class="row mb-2">
              <div class=" col-sm-12 text-center">
                <input type="submit" class="btn btn-link mr-5 ml-5" value="Terminer" >
                <a href="#" class="btn btn-link mr-5"> <i class="fas fa-plus"></i> Ajouter une autre question</a>
              </div>
            </div>
          </form>
          </div>

          <div class="mt-3 mb-3 p-3 card">
            <form class="form-horizontal" action="/survey/next" method="post">
              <input type="hidden" name="survey_id" value={{currentSurevey.id}}>
              <div class="" id="TextBoxesGroup">
                <div class="row mb-3">
                  <div class="col-1">
                  </div>
                  <div class="col-3 ">
                    <label for="" >Question</label>
                  </div>
                  <div class="col-7">
                    <input class="form-control" type="text" name="Question[qstqst]">
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-1">
                  </div>
                  <div class="col-3 ">
                    <label for="" >Description</label>
                  </div>
                  <div class="col-7">
                    <input type="text" class="form-control" name="Question[qstdescript]" >
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-1">
                  </div>
                  <div class="col-3 ">
                    <label for="" >Type</label>
                  </div>
                  <div class="col-7">
                    <div class="">
                      <select onchange="formupdate()" id="select" class="form-control" name="Question[type]">
                        <option value="text">Champ simple</option>
                        <option value="select" selected>Liste avec options</option>
                        <option value="Commentaire" >Commentaire</option>
                        <option value="Titre" >Titre</option>
                      </select>
                    </div>
                  </div>
                </div>

                <div class=""  id="options">

                <div class="row mb-3">
                  <div class="col-12 text-center">
                    <h3>Ajouter option</h3>
                  </div>
                </div>

                <div id='TextBoxesGroup'>
                  <div id="TextBoxDiv1">
                    <div class="row mb-3" id="textbox1">
                      <div class="col-1">
                      </div>
                      <div class="col-3 ">
                        <label for="" >Option 1</label>
                      </div>
                      <div class="col-6">
                        <input type="text"  name="option[]" class="form-control" />
                      </div>
                      <div class="col-2">
                        <a href="#" class="btn btn-dark btn-sm" id='addButton'> + </a>
                        <a href="#" class="btn btn-danger btn-sm" id='removeButton'> - </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="row mb-2">
              <div class=" col-sm-12 text-center">
                <input type="submit" class="btn btn-dark mr-5 ml-5" value="Enregistrer" >
              </div>
            </div>
          </form>



        </div>
      </div>

      <div class="">
        <a href="/survey/save" class="btn btn-block btn-dark">Terminer</a>
      </div>
</section>



<script src="/js/jquery.js" charset="utf-8"></script>

<script type="text/javascript">

$(document).ready(function(){

   var counter = 1;

   $("#addButton").click(function () {

 if(counter>10){
           alert("Only 10 textboxes allow");
           return false;
 }

 var newTextBoxDiv = $(document.createElement('div'))
      .attr("id", 'TextBoxDiv' + counter);

 newTextBoxDiv.after().html(
   '<div  class="row mb-3" id="textbox'+counter+'">'+
     '<div class="col-1"></div>'+
     '<div class="col-3"><label>Option'+counter+'</label></div>'+
     '<div class="col-7"><input type="text"  name="option[]" class="form-control" /></div>'+
   '</div>');


 newTextBoxDiv.appendTo("#TextBoxesGroup");


 counter++;
    });

    $("#removeButton").click(function () {
 if(counter==1){
         alert("No more textbox to remove");
         return false;
      }

 counter--;

       $("#TextBoxDiv" + counter).remove();

    });

    $("#getButtonValue").click(function () {

 var msg = '';
 for(i=1; i<counter; i++){
     msg += "\n Textbox #" + i + " : " + $('#textbox' + i).val();
 }
       alert(msg);
    });
 });
</script>

<script type="text/javascript">
  function formupdate() {
      var selectedPackage = document.getElementById("select").value;
      document.getElementById('options').style.display = "block";
      if ( document.getElementById("select").value != 'select' ) {
           document.getElementById('options').style.display = "none";
      }
  }
</script>

{% endblock %}
