{% extends 'base.html.twig' %}
{% block content %}
<section class="mt-5">
    <div class="container">
        <div style="min-height: 150px;position:relative; " class="p-3 mb-4 pl-5 w-100 bg-dark text-white">
          <div class="text-white text-center" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <h1>  Ajouter Questionaires   </h1>
          </div>
        </div>
        <div class="p-3 m-0 pl-5 w-100 bg-dark text-white">
          <h3> Ajouter information Ã  propos de {{patient.nom}} {{patient.prenom}} </h3>
        </div>
        <div class="p-3 m-0 pl-5 w-100 bg-white">
          <div class="p-3 card">
            <div class="text-center w-100 mb-3">
              <h2>Questionaire :</h2>
            </div>
            <div class="row mb-3">
              <div class="col-1">
              </div>
              <div class="col-3 ">
                <label for="">Id du questionaire</label>
              </div>
              <div class="col-7">
                #{{ survey.id}} -
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-1">
              </div>
              <div class="col-3 ">
                <label for="">Titre du questionaire</label>
              </div>
              <div class="col-7">
                {{ survey.title}}
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-1">
              </div>
              <div class="col-3 ">
                <label for="">Description: </label>
              </div>
              <div class="col-7">
                {{ survey.description}}
                {{ survey.getQuestions | length}}
              </div>
            </div>
          </div>
          <div class="mt-3 mb-3  w-100 p-3">
            <div class="text-center w-100 mb-3">
              <h2>Questions :</h2>
            </div>
            <table class="table table-striped table-hover">
              <tbody>
                <form class="" action="/add/survey/reply" method="post">
                  <input type="hidden" name="pat_id" value={{patient.id}}>
                  <input type="hidden" name="survey_id" value={{survey.id}}>
                  {% for item in questions %}
                    <tr>
                      <td>
                          <label for="">
                            {% if item.Type == "Titre" %}
                              <h3>
                            {% endif %}
                            {{ item.question |capitalize  }} <br>
                              {% if item.Type == "Titre" %}
                            </h3>
                            {% endif %}
                          </label>

                        <br>
                        <small>
                          {{ item.Description |capitalize  }}
                        </small>
                      </td>
                      <td>
                        <input type="hidden" class="form-control" name="answer[{{item.id}}][questionid]" value={{item.id}}>
                        {% if item.type  == 'text' %}
                          <input type="text" class="form-control" name="answer[{{item.id}}][answer]" value="">
                        {% endif %}

                        {% if item.type == 'Commentaire' %}
                          <textarea type="text" class="form-control" name="answer[{{item.id}}][answer]" value="">
                          </textarea>
                      {% endif %}

                        {% if item.type  == 'select' %}
                          <select type="text" class="form-control" name="answer[{{item.id}}][answer]" value="">
                            {% for item in item.getQuestionOptions %}
                                <option value={{item.getAwnser}}>{{item.getAwnser | capitalize}}</option>
                            {% endfor %}
                          </select>
                        {% endif %}

                        {% if item.type  == 'checkbox' %}
                        <div class="form-check">
                            {% for j in item.getQuestionOptions %}
                              <input type="checkbox" class="form-check-input" value={{j.getAwnser}} name="answer[{{item.id}}][answer][]">
                              <label class="form-check-label" for="exampleCheck1">{{j.getAwnser | capitalize}}</label> <br>
                            {% endfor %}
                          </div>
                        {% endif %}

                      </td>
                    </tr>
                  {% endfor %}
                  <tr>
                    <td colspan="2" class="text-center bg-white">
                      <input type="reset" class="btn mr-3 ml-3 btn-default" name="button" value="Suprimer" />
                      <input type="submit" class="btn mr-3 ml-3 btn-dark  text-white" name="button" value="Terminer" />
                    </td>
                  </tr>
                </form>
              </tbody>
            </table>
          </div>





        </div>
      </div>
</section>



{% endblock %}
